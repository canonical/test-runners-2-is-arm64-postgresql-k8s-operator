{"uid":"4b4757e66a1912dae1a509f688f20b0f","children":[{"name":"Test defects","children":[{"name":"juju.errors.JujuUnitError: Unit in error: postgresql-k8s/0","children":[{"name":"test_deploy_latest","uid":"26521ab7fbbe9499","parentUid":"a2290998b3c55f42a4848ea3c02b7653","status":"broken","time":{"start":1720229371732,"stop":1720229621633,"duration":249901},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail","group(1)"]},{"name":"test_persist_data_through_graceful_restart","uid":"82a156a5b306cdc3","parentUid":"a2290998b3c55f42a4848ea3c02b7653","status":"broken","time":{"start":1720231680770,"stop":1720231767093,"duration":86323},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","group(1)"]}],"uid":"a2290998b3c55f42a4848ea3c02b7653"},{"name":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/0 [allocating] waiting: installing agent","children":[{"name":"test_relations","uid":"7c3f631eff53cc27","parentUid":"f37705b6aedc7e75b50f0e74e458df48","status":"broken","time":{"start":1720229405631,"stop":1720230433359,"duration":1027728},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail","group(1)"]}],"uid":"f37705b6aedc7e75b50f0e74e458df48"},{"name":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/0 [allocating] waiting: installing agent\n  postgresql-k8s/1 [allocating] waiting: installing agent\n  postgresql-k8s/2 [allocating] waiting: installing agent","children":[{"name":"test_deploy_active","uid":"23d55be1df5d330c","parentUid":"4c0a5101cce553c0881299d1c74d0d59","status":"broken","time":{"start":1720229417156,"stop":1720230436114,"duration":1018958},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["skip_if_deployed","asyncio","abort_on_fail","group(1)"]}],"uid":"4c0a5101cce553c0881299d1c74d0d59"},{"name":"asyncio.exceptions.TimeoutError","children":[{"name":"test_deploy_without_trust","uid":"b61497e0ea3227eb","parentUid":"058a006597a0df056ad258eee876e9e4","status":"broken","time":{"start":1720229422193,"stop":1720230444476,"duration":1022283},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail","group(1)"]}],"uid":"058a006597a0df056ad258eee876e9e4"},{"name":"juju.errors.JujuError: resolving ch:postgresql-test-app : resolving with preferred channel: Post \"https://api.charmhub.io/v2/charms/refresh\": dial tcp: lookup api.charmhub.io: i/o timeout","children":[{"name":"test_deploy_charms","uid":"34e5fcc4c6e7bf6b","parentUid":"d33f64853183ff91a4f8ec62f3170353","status":"broken","time":{"start":1720229424875,"stop":1720229458177,"duration":33302},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail","group(1)"]}],"uid":"d33f64853183ff91a4f8ec62f3170353"},{"name":"websockets.exceptions.ConnectionClosedError: no close frame received or sent","children":[{"name":"test_config_parameters","uid":"80a39934cf5e9d6d","parentUid":"e80f22394354b3fd8c92d131ab232bb6","status":"broken","time":{"start":1720229432316,"stop":1720230240331,"duration":808015},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail","group(1)"]},{"name":"test_read_only_endpoint_in_scaled_up_cluster","uid":"a15247268d90a07c","parentUid":"e80f22394354b3fd8c92d131ab232bb6","status":"broken","time":{"start":1720230786479,"stop":1720230995272,"duration":208793},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","group(1)"]},{"name":"test_relation_broken","uid":"cea113280dffafab","parentUid":"e80f22394354b3fd8c92d131ab232bb6","status":"broken","time":{"start":1720230995319,"stop":1720230995320,"duration":1},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","group(1)"]},{"name":"test_restablish_relation","uid":"e8089538dcc9b987","parentUid":"e80f22394354b3fd8c92d131ab232bb6","status":"broken","time":{"start":1720230995343,"stop":1720230995344,"duration":1},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","group(1)"]},{"name":"test_relation_with_no_database_name","uid":"ed73049975e5723c","parentUid":"e80f22394354b3fd8c92d131ab232bb6","status":"broken","time":{"start":1720230995349,"stop":1720230995370,"duration":21},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail","group(1)"]}],"uid":"e80f22394354b3fd8c92d131ab232bb6"},{"name":"juju.errors.JujuUnitError: Unit in error: postgresql-k8s-aws/0","children":[{"name":"test_backup_and_restore","uid":"54c029867d56207c","parentUid":"ee2a957cc9610a559a896496069c8bb5","status":"broken","time":{"start":1720229442009,"stop":1720229800896,"duration":358887},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail","group(1)"]}],"uid":"ee2a957cc9610a559a896496069c8bb5"},{"name":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/0 [allocating] waiting: installing agent\n  postgresql-k8s/1 [allocating] waiting: installing agent","children":[{"name":"test_plugins","uid":"a3301b159b3a331e","parentUid":"df4a4784fc03d7fc0ecd73eed7cfc18e","status":"broken","time":{"start":1720229461965,"stop":1720230480435,"duration":1018470},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail","group(1)"]}],"uid":"df4a4784fc03d7fc0ecd73eed7cfc18e"},{"name":"juju.errors.JujuAPIError: application \"replication-offer\" not found","children":[{"name":"test_async_replication","uid":"720d7f35e026b8c9","parentUid":"a5a3c5e6bc4c403673d813e90aacdea5","status":"broken","time":{"start":1720229866218,"stop":1720229914452,"duration":48234},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires juju 3')","group(1)"]}],"uid":"a5a3c5e6bc4c403673d813e90aacdea5"},{"name":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndatabase/0 [idle] active: Primary\n  database/1 [idle] waiting: awaiting for cluster to start\n  database/2 [idle] waiting: awaiting for cluster to start\n  another-database/0 [idle] waiting: awaiting for cluster to start\n  another-database/1 [idle] active: Primary\n  another-database/2 [idle] active:","children":[{"name":"test_two_applications_doesnt_share_the_same_relation_data","uid":"e788f6ece56a461b","parentUid":"0ef236eebb319e7da78771eafa8dab3f","status":"broken","time":{"start":1720229943492,"stop":1720230546018,"duration":602526},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","group(1)"]}],"uid":"0ef236eebb319e7da78771eafa8dab3f"},{"name":"juju.errors.JujuUnitError: Unit in error: postgresql-k8s/3","children":[{"name":"test_scale_down_and_up","uid":"f1d935f6edcdbd75","parentUid":"da82859490cb6e48b4dd12cd591f70b6","status":"broken","time":{"start":1720230779975,"stop":1720231680755,"duration":900780},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["unstable","asyncio","group(1)"]}],"uid":"da82859490cb6e48b4dd12cd591f70b6"},{"name":"juju.errors.JujuUnitError: Unit in error: postgresql-k8s/2","children":[{"name":"test_full_cluster_restart[SIGTERM-/usr/bin/patroni]","uid":"27633da469f3c8fa","parentUid":"cfe896b23c2f4d9294f930d8b338b009","status":"broken","time":{"start":1720230889795,"stop":1720230889795,"duration":0},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":["'/usr/bin/patroni'","'SIGTERM'"],"tags":["unstable","asyncio","group(1)"]},{"name":"test_full_cluster_restart[SIGKILL-postgres]","uid":"75fc97ffff235425","parentUid":"cfe896b23c2f4d9294f930d8b338b009","status":"broken","time":{"start":1720230957537,"stop":1720230957537,"duration":0},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":["'postgres'","'SIGKILL'"],"tags":["unstable","asyncio","group(1)"]}],"uid":"cfe896b23c2f4d9294f930d8b338b009"},{"name":"websockets.exceptions.ConnectionClosedError: sent 1011 (internal error) keepalive ping timeout; no close frame received","children":[{"name":"test_full_cluster_restart[SIGKILL-/usr/bin/patroni]","uid":"31a1c9115521c2f0","parentUid":"08d3950bc5c04e5c1c29ec245fb39c74","status":"broken","time":{"start":1720231264049,"stop":1720231264049,"duration":0},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":["'/usr/bin/patroni'","'SIGKILL'"],"tags":["unstable","asyncio","group(1)"]},{"name":"test_network_cut","uid":"be41b83479ddb6c9","parentUid":"08d3950bc5c04e5c1c29ec245fb39c74","status":"broken","time":{"start":1720232055419,"stop":1720232055520,"duration":101},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","group(1)"]},{"name":"test_scaling_to_zero","uid":"ed78ad517737764f","parentUid":"08d3950bc5c04e5c1c29ec245fb39c74","status":"broken","time":{"start":1720232357192,"stop":1720232357193,"duration":1},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","group(1)"]}],"uid":"08d3950bc5c04e5c1c29ec245fb39c74"},{"name":"tenacity.RetryError: RetryError[<Future at 0xffffb44bc3d0 state=finished raised ConnectionClosedError>]","children":[{"name":"test_forceful_restart_without_data_and_transaction_logs","uid":"5489462a969337bd","parentUid":"24e804c52ad327a92b5fffa770e36f49","status":"broken","time":{"start":1720231564945,"stop":1720231564945,"duration":0},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","group(1)"]}],"uid":"24e804c52ad327a92b5fffa770e36f49"},{"name":"psycopg2.errors.ReadOnlySqlTransaction: cannot execute CREATE TABLE in a read-only transaction","children":[{"name":"test_persist_data_through_failure","uid":"f86aa88c7e133153","parentUid":"7e61d251a4058357664fb9be08d9ff83","status":"broken","time":{"start":1720231767098,"stop":1720231945896,"duration":178798},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","group(1)"]}],"uid":"7e61d251a4058357664fb9be08d9ff83"},{"name":"AttributeError: 'NoneType' object has no attribute 'run'","children":[{"name":"test_automatic_failover_after_leader_issue","uid":"f85d322bcc540678","parentUid":"448af61e3054a3a8bcfa9a48044846c2","status":"broken","time":{"start":1720231945942,"stop":1720232024727,"duration":78785},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","group(1)"]}],"uid":"448af61e3054a3a8bcfa9a48044846c2"},{"name":"tenacity.RetryError: RetryError[<Future at 0xffff826cf1f0 state=finished raised AssertionError>]","children":[{"name":"test_application_removal","uid":"bbfb8ef8bee63bcd","parentUid":"19e6c70d1d175e7048f9bdc832ecbfef","status":"broken","time":{"start":1720232024731,"stop":1720232206034,"duration":181303},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","group(1)"]}],"uid":"19e6c70d1d175e7048f9bdc832ecbfef"},{"name":"juju.errors.JujuError: ['cannot add application \"postgresql-k8s\": application already exists']","children":[{"name":"test_redeploy_charm_same_model","uid":"a256c73b1194f391","parentUid":"4e15ee4a6a66e6509457b45a24784669","status":"broken","time":{"start":1720232206040,"stop":1720232228644,"duration":22604},"flaky":false,"newFailed":false,"newPassed":false,"newBroken":true,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","group(1)"]}],"uid":"4e15ee4a6a66e6509457b45a24784669"}],"uid":"bdbf199525818fae7a8651db9eafe741"},{"name":"Product defects","children":[{"name":"AssertionError: assert '0' == '100'\n  \n  - 100\n  + 0","children":[{"name":"test_postgresql_parameters_change","uid":"e34271b351548351","parentUid":"5777b05634751523d6ba09b5ab588cb8","status":"failed","time":{"start":1720229853413,"stop":1720230326952,"duration":473539},"flaky":false,"newFailed":true,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","group(1)"]}],"uid":"5777b05634751523d6ba09b5ab588cb8"},{"name":"AssertionError: Failed to add to pebble layer, unit=postgresql-k8s/2, container=postgresql, service=postgresql","children":[{"name":"test_full_cluster_restart[SIGTERM-postgres]","uid":"d5e6cc5f7940484d","parentUid":"e9f959c207a74110a758f01b35ecacd6","status":"failed","time":{"start":1720230753275,"stop":1720230753275,"duration":0},"flaky":false,"newFailed":true,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":["'postgres'","'SIGTERM'"],"tags":["unstable","asyncio","group(1)"]}],"uid":"e9f959c207a74110a758f01b35ecacd6"},{"name":"AssertionError: assert {'Endpoints/p...primary', ...} == {'Endpoints/p...eplicas', ...}\n  \n  Extra items in the left set:\n  \u001B[0m\u001B[33m'\u001B[39;49;00m\u001B[33mEndpoints/patroni-postgresql-k8s-failover\u001B[39;49;00m\u001B[33m'\u001B[39;49;00m\u001B[90m\u001B[39;49;00m\n  \n  Full diff:\n  \u001B[0m\u001B[90m \u001B[39;49;00m {\u001B[90m\u001B[39;49;00m\n  \u001B[90m \u001B[39;49;00m     'Endpoints/patroni-postgresql-k8s',\u001B[90m\u001B[39;49;00m\n  \u001B[90m \u001B[39;49;00m     'Endpoints/patroni-postgresql-k8s-config',\u001B[90m\u001B[39;49;00m\n  \u001B[92m+     'Endpoints/patroni-postgresql-k8s-failover',\u001B[39;49;00m\u001B[90m\u001B[39;49;00m\n  \u001B[90m \u001B[39;49;00m     'Endpoints/patroni-postgresql-k8s-sync',\u001B[90m\u001B[39;49;00m\n  \u001B[90m \u001B[39;49;00m     'Endpoints/postgresql-k8s',\u001B[90m\u001B[39;49;00m\n  \u001B[90m \u001B[39;49;00m     'Endpoints/postgresql-k8s-primary',\u001B[90m\u001B[39;49;00m\n  \u001B[90m \u001B[39;49;00m     'Endpoints/postgresql-k8s-replicas',\u001B[90m\u001B[39;49;00m\n  \u001B[90m \u001B[39;49;00m     'Service/patroni-postgresql-k8s-config',\u001B[90m\u001B[39;49;00m\n  \u001B[90m \u001B[39;49;00m     'Service/postgresql-k8s',\u001B[90m\u001B[39;49;00m\n  \u001B[90m \u001B[39;49;00m     'Service/postgresql-k8s-primary',\u001B[90m\u001B[39;49;00m\n  \u001B[90m \u001B[39;49;00m     'Service/postgresql-k8s-replicas',\u001B[90m\u001B[39;49;00m\n  \u001B[90m \u001B[39;49;00m }\u001B[90m\u001B[39;49;00m","children":[{"name":"test_redeploy_charm_same_model_after_forcing_removal","uid":"ae3a94b13f6119af","parentUid":"83bd51d63f8a1b4207caf66108110425","status":"failed","time":{"start":1720232228649,"stop":1720232230505,"duration":1856},"flaky":false,"newFailed":true,"newPassed":false,"newBroken":false,"retriesCount":1,"retriesStatusChange":true,"parameters":[],"tags":["asyncio","group(1)"]}],"uid":"83bd51d63f8a1b4207caf66108110425"}],"uid":"8fb3a91ba5aaf9de24cc8a92edc82b5d"}],"name":"categories"}